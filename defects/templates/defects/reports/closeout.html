<html lang="en">

<style>
  /* page */

  @page {
    size: A4 landscape; /* Change from the default size of A4 */
    margin: 1cm; /* Set margin on each page */
  }

  /* start reset */
  html {
    box-sizing: border-box;
    font-size: 12px;
    font-family: Arial, "Helvetica Neue", sans-serif;
  }

  *, *:before, *:after {
    box-sizing: inherit;
  }

  body, h1, h2, h3, h4, h5, h6, p, ol, ul {
    margin: 0;
    padding: 0;
    font-weight: normal;
  }

  ol {
    list-style: none;
  }

  ul {
    list-style: disc;
  }

  li {
    padding-top: 0.2rem;
    padding-bottom: 0.2rem;
  }

  img {
    max-width: 100%;
    height: auto;
  }

  /* end reset */

  th {
    color: white;
    background-color: #001c48;
    text-transform: uppercase;
  }

  table {
    width: 100%;
  }

  table,
  th,
  td {
    padding: 10px 7px;
    border: 1px solid black;
    border-collapse: collapse;
  }

  img {
    max-width: 500px;
  }

  .header {
    width: 100%;
    padding: 10px;
    background-color: #00757a;
    text-transform: uppercase;
    color: white;
    font-weight: bold;
  }

  .text-valterra {
    color: #00757a
  }

  .text-blue {
    color: #001c48;
  }

  .content {
    padding: 0.5rem
  }

  p {
    margin-top: 0;
    margin-bottom: 1rem;
  }

</style>

<div style="margin-bottom: 1rem; margin-top: 0" class="text-valterra">
  <h1 style="font-size: 32px">Reliability Incident Close-Out</h1>
  <h2 style="font-size: 20px">{{ incident.code }} – {{ incident.short_description }} – {{ incident.time_start|date:"Y-m-d" }}</h2>
</div>

<div style="display: flex;">
  <div id="left" style="flex-basis: 50%;padding-right: 1rem">
    <div class="header" style="text-align: center">Immediate Cause</div>
    <div class="content">{{ incident.close_out_immediate_cause|linebreaks }}</div>
    <div class="header" style="text-align: center">Root Cause</div>
    <div class="content">{{ incident.close_out_root_cause|linebreaks }}</div>

    <div style="text-align: center; border: 2px solid #00757a; padding: 1rem 2rem">
      <div style="font-size: 16px; font-weight: bold; margin-bottom: 1rem" class="text-valterra">Downtime & Repair Cost</div>
      <div style="color: red">
        Downtime: {{ incident.duration_text }}<br>
        Production Value Lost: {{ incident.production_value_loss }} Pt Oz<br>
        Rand Value Lost: R{{ incident.rand_value_loss}}<br>
        Repair Cost: R{{ incident.repair_cost }}<br>
      </div>
    </div>
  </div>
  <div id="right" style="flex-basis: 50%; padding-left: 1rem">
    <div style="display: flex">
      <div class="header" style="color: white; background-color: rgba(0, 117, 126, 0.6);">Short-Term Action {{ incident.close_out_short_term_date|date:"Y-m" }}</div>
    </div>
    <div class="content">
      <ul>
        {% for action in incident.close_out_short_term_actions_list %}
          <li>{{ action }}</li>
        {% endfor %}
      </ul>
    </div>
    <div style="display: flex">
      <div class="header text-blue" style="color: white; background-color: rgba(0, 117, 126, 0.4);">Medium-Term Action {{ incident.close_out_medium_term_date|date:"Y-m" }}</div>
    </div>
    <div class="content">
      <ul>
        {% for action in incident.close_out_medium_term_actions_list %}
          <li>{{ action }}</li>
        {% endfor %}
      </ul>
    </div>
    <div style="display: flex">
      <div class="header text-blue" style="color: white; background-color: rgba(0, 117, 126, 0.2);">Long-Term Action {{ incident.close_out_long_term_date|date:"Y-m" }}</div>
    </div>
    <div class="content">
      <ul>
        {% for action in incident.close_out_long_term_actions_list %}
          <li>{{ action }}</li>
        {% endfor %}
      </ul>
    </div>

    <div style="margin-top: 2rem;">
      <table>
        <tbody>
        <tr>
          <td style="text-align: center; font-size: 9px; background-color: rgba(0, 117, 126, 0.4); color: white">{{ ratings.re.0 }}<br>Rating: {{ ratings.re.1 }}/5<br>{{ ratings.re.2|date:"Y-m-d H:i" }}</td>
          <td style="text-align: center; font-size: 9px; background-color: rgba(0, 117, 126, 0.4); color: white">{{ ratings.se.0 }}<br>Rating: {{ ratings.se.1 }}/5<br>{{ ratings.se.2|date:"Y-m-d H:i" }}</td>
          <td style="text-align: center; font-size: 9px; background-color: rgba(0, 117, 126, 0.4); color: white">{{ ratings.sem.0 }}<br>Rating: {{ ratings.sem.1 }}/5<br>{{ ratings.sem.2|date:"Y-m-d H:i" }}</td>
        </tr>
        <tr>
          <td style="text-align: center; font-weight: bold; background-color: rgba(0, 117, 126, 0.6); color: white">RE</td>
          <td style="text-align: center; font-weight: bold; background-color: rgba(0, 117, 126, 0.6); color: white">SE</td>
          <td style="text-align: center; font-weight: bold; background-color: rgba(0, 117, 126, 0.6); color: white">SEM</td>
        </tr>
        <tr>
          <td colspan="3" style="text-align: center; background-color: #00757a; color: white; font-weight: bold; text-transform: uppercase">Close–Out Confidence</td>
        </tr>
        <tr>
          <td colspan="3" style="text-align: center; background-color: rgba(0, 117, 126, 0.2); color: white">

            {% for ix in incident.close_out_confidence_filled_stars %}
              {# fill #}
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#00757a" class="bi bi-star-fill" viewBox="0 0 16 16">
                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" fill="#00757a"/>
              </svg>
            {% endfor %}

            {% for ix in incident.close_out_confidence_empty_stars %}
              {# empty #}
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
                <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
              </svg>
            {% endfor %}
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

</html>
