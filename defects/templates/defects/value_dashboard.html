{% extends 'defects/base.html' %}

{% load static %}

{% block content %}

  <main>

    <div class="d-flex justify-content-between mb-3">
      <h2>Value Dashboard</h2>
      <div>
        <div class="btn-group">
          <a href="?area=all" class="btn btn-secondary btn-sm {% if not request.GET.area or request.GET.area == "all" %} active {% endif %}">All Areas</a>
          {% for area in areas %}
            <a href="?area={{ area.id }}" class="btn btn-secondary btn-sm {% if request.GET.area == area.id|slugify %}active {% endif %}">{{ area.name }}</a>
          {% endfor %}
        </div>
      </div>
    </div>

    <p>Value of Defect Elimination for the <strong>past 52 weeks</strong>.</p>
    <p><small class="text-body-secondary">Filter data by area using the buttons above.</small></p>
    <canvas class="my-4 w-100" id="weekChart" width="900" height="380"></canvas>

    <p>Value of Defect Elimination for the <strong>past 3 years</strong>.</p>
    <p><small class="text-body-secondary">Filter data by area using the buttons above.</small></p>
    <canvas class="my-4 w-100" id="monthChart" width="900" height="380"></canvas>

    <p><strong>Explanation of Data</strong></p>

    <p>Incidents will contribute a <strong>negative</strong> value if they are less than a year old, or if the solutions are not closed out.</p>
    <p>Incidents will contribute a <strong>positive</strong> value if all solutions are closed out and are between 1-3 years old.</p>

    {{ graph_data|json_script:"graph-data" }}
    <script defer src="{% static 'scripts/value-dashboard.js' %}"></script>
  </main>

{% endblock %}

